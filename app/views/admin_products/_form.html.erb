<%= render "layouts/admin-nav" %>

<div class="body">
  <div class="container">
        <h3>商品編集</h3>
        <h1>商品編集</h1>
    <%# フラッシュメッセージ %>
    <% flash.each do |message_type, message| %>
      <div class="alert alert-<%= message_type %>">
        <%= message %>
      </div>
    <% end %>
        <%= form_for product, url: "/admin/products/#{product.id}" do |f| %>
        <%= render 'layouts/error_messages', model: f.object %>
    <div class="row">
      <div class="col-xs-5">

        <%# 商品の編集フォーム %>

          <div>
          　<label for="artist-name">アーティスト名</label>
          　<%= f.collection_select(:artist_id,@artists,:id,:name) %>
          </div>

          <div>
          　<label for="album-name">シングル/アルバム名</label>
            <%= f.text_field :name, id:"album-name" %>
          </div>

          <div>
            <label>ジャケット画像</label>
              <%= attachment_image_tag product, :image, :fill, 200, 200, format:"jpeg", fallback:"no_image.jpg",size:'200x200' %>
            <%= f.attachment_field :image  %>
          </div>

          <div>
          　<label for="price">価格（税別価格）</label>
            <%= f.text_field :price, id:"price" %>
          </div>

          <div>
          　<label for="stock">在庫数</label>
            <%= f.text_field :stock, id:"stock" %>
          </div>

          <div>
          　<label for="artist-name">レーベル名</label>
          　<%= f.collection_select :label_id, @labels, :id, :name %>
          </div>

          <div>
        　<label for="genre">ジャンル</label>
          　<%= f.collection_select(:genre_id,@genres,:id,:name) %>
          </div>

          <div>
        　<label for="status">ステータス</label>
        　　<%= f.select :status, ["販売中", "販売停止中"], :prompt => "選択してください", id:"status"%>
          </div>

					<div class="">
						<label for="is_deleted">削除フラグ</label>
						<%= f.check_box :is_deleted, {}, "true", "false" %>
					</div>
      </div>


      <!-- 右側に表示 -->
      <div class="col-xs-6 col-xs-offset-1 song-edit-table">
      　<label>収録曲</label>
              <table class="table">
                <thead>
                  <tr>
              　    <th>曲名</th>
              　    <th>ディスク番号</th>
                  </tr>
                </thead>
                  <div class="songs-table">
                  <%= f.fields_for :songs do |song| %>
                    <tr>
                      <%= render "song_fields", f: song, product: @product %>
                    </tr>
                  </div>
                  <% end %>
              </table>
              <div>
                <div class="add-song-button-edit">
                    <%= link_to_add_association "行追加", f, :songs, class: 'btn btn-primary btn-xs' %>
                </div>
              </div>
      </div>

    </div>
                <div>
                  <%= f.submit "更新", class:"btn btn-primary" %>
                </div>
        <% end %>
  </div>
</div>
